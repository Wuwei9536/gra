(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{Ss4v:function(e,t,a){"use strict";a.r(t);var n=a("smUt"),r=a.n(n),u=a("NTxs"),s=a.n(u),p=a("dCQc");t["default"]={namespace:"cpu",state:{data:[],equipment:[],defaultEquipment:"",percent:100,isShow:!1},effects:{fetchCpuData:s.a.mark(function e(t,a){var n,r,u,c,i,o,d,l,m,b,f;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,u=a.put,e.next=4,r(p["k"],{});case 4:if(c=e.sent,i=n,o=i.id,d=i.pathname,o){e.next=12;break}return n={id:c[0].key},e.next=10,u({type:"setDefaultEquipment",payload:c[0].name});case 10:e.next=21;break;case 12:n={id:o},e.t0=s.a.keys(c);case 14:if((e.t1=e.t0()).done){e.next=21;break}if(l=e.t1.value,n.id!=c[l].key){e.next=19;break}return e.next=19,u({type:"setDefaultEquipment",payload:c[l].name});case 19:e.next=14;break;case 21:e.t2=d,e.next="/dashboard/cpu"===e.t2?24:"/dashboard/storage"===e.t2?26:"/dashboard/disk"===e.t2?28:30;break;case 24:return m=p["i"],e.abrupt("break",31);case 26:return m=p["m"],e.abrupt("break",31);case 28:return m=p["j"],e.abrupt("break",31);case 30:return e.abrupt("break",31);case 31:return e.next=33,r(m,n);case 33:return b=e.sent,f=[],b.length>0&&(f=b.map(function(e){return{key:e.id,time:e.create_time,cpu:e.usage_rate,cpuPercent:100*e.usage_rate+"%",tableTime:new Date(e.create_time).toLocaleTimeString()}})),e.next=38,u({type:"setEquipmentData",payload:c});case 38:return e.next=40,u({type:"setCpuData",payload:f});case 40:return e.next=42,u({type:"setIsShow",payload:!0});case 42:case"end":return e.stop()}},e)})},reducers:{setCpuData:function(e,t){var a=t.payload;return r()({},e,{data:a,percent:a.length>0?100*a[a.length-1].cpu:100})},setEquipmentData:function(e,t){var a=t.payload;return r()({},e,{equipment:a})},setDefaultEquipment:function(e,t){var a=t.payload;return r()({},e,{defaultEquipment:a})},setIsShow:function(e,t){var a=t.payload;return r()({},e,{isShow:a})}}}}}]);